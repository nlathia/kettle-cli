# operator

A command line tool for creating and deploying production machine learning functions.

These functions can be deployed on Google Cloud managed infrastructure as:

* [Cloud Functions](https://cloud.google.com/functions)
* [Cloud Run](https://cloud.google.com/run) containerized applications

Warning: this is a pre-release alpha version of this tool. Please send any bugs or feedback.

## Installing

### Installing using brew

You can install `operator` using `brew` and [the operatorai tap](https://github.com/operatorai/homebrew-tap).

```bash
❯ brew tap operatorai/tap
❯ brew install operator
```

### Installing from source

Install the requirements, if you do not already have them:

1. [Download and install Go](https://golang.org/doc/install).
2. The [gcloud](https://cloud.google.com/sdk/gcloud) SDK, so that you can deploy functions to GCP.
3. Install [pyenv](https://github.com/pyenv/pyenv) and [pyenv-virtualenv](https://github.com/pyenv/pyenv-virtualenv): the boiler plate generated by this tool enables you to easily create Python virtual environments, but assumes you have these tools installed already.
4. [Optional] Install [Docker](https://docs.docker.com/get-docker/) to build and run cloud run containerized applications locally.

Install `go-bindata` and `operator` with:

```bash
❯ go get -u github.com/go-bindata/go-bindata/...
❯ go get -u github.com/operatorai/operator/...
```

## Usage

Set up the CLI tool using `operator init`.

```bash
❯ operator init
Use the arrow keys to navigate: ↓ ↑ → ← 
? Deployment type: 
  ▸ Google Cloud Function
    Google Cloud Run
```

Create a new deployment with `operator create`:

```bash
❯ operator create service.hello-world
```

... and set it up:

```bash
❯ cd hello-world 
❯ make install # To create a pyenv-virtualenv
```

Launch it locally:

```bash
❯ make localhost
```

... and, when you're ready, deploy it!

```bash
❯ operator deploy .
```

## Limitations

There are many! This is a version 0.

* Only http-triggered cloud functions are supported
* This assumes that GCP APIs have been enabled and may not fail gracefully
* There is no support for AWS yet

Please report any bugs or issues to me (neal.lathia@gmail.com) or by raising an issue in this repo.

## Notes

This tool has been built using the [Cobra Generator](https://github.com/spf13/cobra/blob/master/cobra/README.md#cobra-generator).

To add a new command:

```bash
❯ cobra add <command-name>
```
